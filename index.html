<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Mosaic HTML Demo - Input Form</title>
        <script
      type="text/javascript"
      src="//code.jquery.com/jquery-latest.min.js"
    ></script>
    <script
      type="text/javascript"
      src="//hst-api.wialon.com/wsdk/script/wialon.js"
    ></script>
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<link href="./css/vendors/flatpickr.min.css" rel="stylesheet" />
		<link href="./style.css" rel="stylesheet" />
        
	</head>

	<body
		class="font-inter antialiased bg-slate-100 text-slate-600"
		:class="{ 'sidebar-expanded': sidebarExpanded }"
		x-data="{ sidebarOpen: false, sidebarExpanded: localStorage.getItem('sidebar-expanded') == 'true' }"
		x-init="$watch('sidebarExpanded', value => localStorage.setItem('sidebar-expanded', value))"
	>
		<script>
			if (localStorage.getItem("sidebar-expanded") == "true") {
				document.querySelector("body").classList.add("sidebar-expanded");
			} else {
				document.querySelector("body").classList.remove("sidebar-expanded");
			}
		</script>

		<!-- Page wrapper -->
		<div class="flex h-screen overflow-hidden">
			<!-- Sidebar -->
			<div>
				<!-- Sidebar backdrop (mobile only) -->
				<div
					class="fixed inset-0 bg-slate-900 bg-opacity-30 z-40 lg:hidden lg:z-auto transition-opacity duration-200"
					:class="sidebarOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'"
					aria-hidden="true"
					x-cloak
				></div>

				<!-- Sidebar -->
				<div
					id="sidebar"
					class="flex flex-col absolute z-40 left-0 top-0 lg:static lg:left-auto lg:top-auto lg:translate-x-0 h-screen overflow-y-scroll lg:overflow-y-auto no-scrollbar w-64 lg:w-20 lg:sidebar-expanded:!w-64 2xl:!w-64 shrink-0 bg-slate-800 p-4 transition-all duration-200 ease-in-out"
					:class="sidebarOpen ? 'translate-x-0' : '-translate-x-64'"
					@click.outside="sidebarOpen = false"
					@keydown.escape.window="sidebarOpen = false"
					x-cloak="lg"
				>
					<!-- Sidebar header -->
					<div class="flex justify-between mb-10 pr-3 sm:px-2">
						<!-- Close button -->
						<button
							class="lg:hidden text-slate-500 hover:text-slate-400"
							@click.stop="sidebarOpen = !sidebarOpen"
							aria-controls="sidebar"
							:aria-expanded="sidebarOpen"
						>
							<span class="sr-only">Close sidebar</span>
							<svg
								class="w-6 h-6 fill-current"
								viewBox="0 0 24 24"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path d="M10.7 18.7l1.4-1.4L7.8 13H20v-2H7.8l4.3-4.3-1.4-1.4L4 12z" />
							</svg>
						</button>
						<!-- Logo -->
						<a class="block" href="index.html">
							<svg width="32" height="32" viewBox="0 0 32 32">
								<defs>
									<linearGradient
										x1="28.538%"
										y1="20.229%"
										x2="100%"
										y2="108.156%"
										id="logo-a"
									>
										<stop stop-color="#A5B4FC" stop-opacity="0" offset="0%" />
										<stop stop-color="#A5B4FC" offset="100%" />
									</linearGradient>
									<linearGradient
										x1="88.638%"
										y1="29.267%"
										x2="22.42%"
										y2="100%"
										id="logo-b"
									>
										<stop stop-color="#38BDF8" stop-opacity="0" offset="0%" />
										<stop stop-color="#38BDF8" offset="100%" />
									</linearGradient>
								</defs>
								<rect fill="#6366F1" width="32" height="32" rx="16" />
								<path
									d="M18.277.16C26.035 1.267 32 7.938 32 16c0 8.837-7.163 16-16 16a15.937 15.937 0 01-10.426-3.863L18.277.161z"
									fill="#4F46E5"
								/>
								<path
									d="M7.404 2.503l18.339 26.19A15.93 15.93 0 0116 32C7.163 32 0 24.837 0 16 0 10.327 2.952 5.344 7.404 2.503z"
									fill="url(#logo-a)"
								/>
								<path
									d="M2.223 24.14L29.777 7.86A15.926 15.926 0 0132 16c0 8.837-7.163 16-16 16-5.864 0-10.991-3.154-13.777-7.86z"
									fill="url(#logo-b)"
								/>
							</svg>
						</a>
					</div>

					<!-- Links -->
					<div class="space-y-8">
						<!-- Pages group -->
						<div>
							<h3 class="text-xs uppercase text-slate-500 font-semibold pl-3">
								<span
									class="hidden lg:block lg:sidebar-expanded:hidden 2xl:hidden text-center w-6"
									aria-hidden="true"
									>•••</span
								>
								<span class="lg:hidden lg:sidebar-expanded:block 2xl:block">Main</span>
							</h3>
							<ul class="mt-3">
								<!-- Home -->
								<li
									class="px-3 py-2 rounded-sm mb-0.5 last:mb-0"
									x-data="{ open: false }"
								>
									<a
										class="block text-slate-200 hover:text-slate-200 truncate transition duration-150"
										href="#0"
										@click.prevent="sidebarExpanded ? open = !open : sidebarExpanded = true"
									>
										<div class="flex items-center justify-between">
											<div class="flex items-center">
												<svg class="shrink-0 h-6 w-6" viewBox="0 0 24 24">
													<path
														class="fill-current text-slate-400"
														d="M12 0C5.383 0 0 5.383 0 12s5.383 12 12 12 12-5.383 12-12S18.617 0 12 0z"
													/>
													<path
														class="fill-current text-slate-600"
														d="M12 3c-4.963 0-9 4.037-9 9s4.037 9 9 9 9-4.037 9-9-4.037-9-9-9z"
													/>
													<path
														class="fill-current text-slate-400"
														d="M12 15c-1.654 0-3-1.346-3-3 0-.462.113-.894.3-1.285L6 6l4.714 3.301A2.973 2.973 0 0112 9c1.654 0 3 1.346 3 3s-1.346 3-3 3z"
													/>
												</svg>
												<span
													class="text-sm font-medium ml-3 lg:opacity-0 lg:sidebar-expanded:opacity-100 2xl:opacity-100 duration-200"
													>Home</span
												>
											</div>
											
										</div>
									</a>

								</li>
					
							</ul>
						</div>
						<!-- More group -->
						<div>
							<h3 class="text-xs uppercase text-slate-500 font-semibold pl-3">
								<span
									class="hidden lg:block lg:sidebar-expanded:hidden 2xl:hidden text-center w-6"
									aria-hidden="true"
									>•••</span
								>
								<span class="lg:hidden lg:sidebar-expanded:block 2xl:block">Template</span>
							</h3>
							<ul class="mt-3">
								<!-- Template -->
								<li
									class="px-3 py-2 rounded-sm mb-0.5 last:mb-0"
									x-data="{ open: false }"
								>
									<a
										class="block text-slate-200 hover:text-white transition duration-150"
										:class="open && 'hover:text-slate-200'"
										href="#0"
										@click.prevent="sidebarExpanded ? open = !open : sidebarExpanded = true"
									>
										<div class="flex items-center justify-between">
											<div class="flex items-center">
												<svg class="shrink-0 h-6 w-6" viewBox="0 0 24 24">
                                                <path class="fill-current text-slate-600" d="M19.714 14.7l-7.007 7.007-1.414-1.414 7.007-7.007c-.195-.4-.298-.84-.3-1.286a3 3 0 113 3 2.969 2.969 0 01-1.286-.3z" />
                                                <path class="fill-current text-slate-400" d="M10.714 18.3c.4-.195.84-.298 1.286-.3a3 3 0 11-3 3c.002-.446.105-.885.3-1.286l-6.007-6.007 1.414-1.414 6.007 6.007z" />
                                                <path class="fill-current text-slate-600" d="M5.7 10.714c.195.4.298.84.3 1.286a3 3 0 11-3-3c.446.002.885.105 1.286.3l7.007-7.007 1.414 1.414L5.7 10.714z" />
                                                <path class="fill-current text-slate-400" d="M19.707 9.292a3.012 3.012 0 00-1.415 1.415L13.286 5.7c-.4.195-.84.298-1.286.3a3 3 0 113-3 2.969 2.969 0 01-.3 1.286l5.007 5.006z" />
                                            </svg>
												<span
													class="text-sm font-medium ml-3 lg:opacity-0 lg:sidebar-expanded:opacity-100 2xl:opacity-100 duration-200"
													>Create Template</span
												>
											</div>
										</div>
									</a>
									
								</li>
				
							</ul>
						</div>

                        <!-- add unit -->
						<div>
							<h3 class="text-xs uppercase text-slate-500 font-semibold pl-3">
								<span
									class="hidden lg:block lg:sidebar-expanded:hidden 2xl:hidden text-center w-6"
									aria-hidden="true"
									>•••</span
								>
								<span class="lg:hidden lg:sidebar-expanded:block 2xl:block">UNITS</span>
							</h3>
							<ul class="mt-3">
								<!-- Template -->
								<li
									class="px-3 py-2 rounded-sm mb-0.5 last:mb-0"
									x-data="{ open: false }"
								>
									<a
										class="block text-slate-200 hover:text-white transition duration-150"
										:class="open && 'hover:text-slate-200'"
										href="#0"
										@click.prevent="sidebarExpanded ? open = !open : sidebarExpanded = true"
									>
										<div class="flex items-center justify-between">
											<div class="flex items-center">
												<svg class="shrink-0 h-6 w-6" viewBox="0 0 24 24">
	<circle class="fill-current text-slate-400" cx="18.5" cy="5.5" r="4.5" />
	<circle class="fill-current text-slate-600" cx="5.5" cy="5.5" r="4.5" />
	<circle class="fill-current text-slate-600" cx="18.5" cy="18.5" r="4.5" />
	<circle class="fill-current text-slate-400" cx="5.5" cy="18.5" r="4.5" />
</svg>
												<span
													class="text-sm font-medium ml-3 lg:opacity-0 lg:sidebar-expanded:opacity-100 2xl:opacity-100 duration-200"
													>Add unit</span
												>
											</div>
										</div>
									</a>
									
								</li>
				
							</ul>
						</div>
						<div>
							<h3 class="text-xs uppercase text-slate-500 font-semibold pl-3">
								<span
									class="hidden lg:block lg:sidebar-expanded:hidden 2xl:hidden text-center w-6"
									aria-hidden="true"
									>•••</span
								>
								<span class="lg:hidden lg:sidebar-expanded:block 2xl:block">RESULTS</span>
							</h3>
							<ul class="mt-3">
								<!-- Template -->
								<li
									class="px-3 py-2 rounded-sm mb-0.5 last:mb-0"
									x-data="{ open: false }"
								>
									<a
										class="block text-slate-200 hover:text-white transition duration-150"
										:class="open && 'hover:text-slate-200'"
										href="#0"
										@click.prevent="sidebarExpanded ? open = !open : sidebarExpanded = true"
									>
										<div class="flex items-center justify-between">
											<div class="flex items-center">
												<svg class="shrink-0 h-6 w-6" viewBox="0 0 24 24">
	<path
		class="fill-current text-slate-600"
		d="M8 1v2H3v19h18V3h-5V1h7v23H1V1z"
	/>
	<path class="fill-current text-slate-600" d="M1 1h22v23H1z" />
	<path
		class="fill-current text-slate-400"
		d="M15 10.586L16.414 12 11 17.414 7.586 14 9 12.586l2 2zM5 0h14v4H5z"
	/>
</svg>
												<span
													class="text-sm font-medium ml-3 lg:opacity-0 lg:sidebar-expanded:opacity-100 2xl:opacity-100 duration-200"
													>Result</span
												>
											</div>
										</div>
									</a>
									
								</li>
				
							</ul>
						</div>
					</div>

				
				</div>
			</div>

			<!-- Content area -->
			<div
				class="relative flex flex-col flex-1 overflow-y-auto overflow-x-hidden bg-white"
			>
				<!-- Site header -->
				<header class="sticky top-0 bg-white border-b border-slate-200 z-30">
					<div class="px-4 sm:px-6 lg:px-8">
						<div class="flex items-center justify-between h-16 -mb-px">
							<!-- Header: Left side -->
							<div class="flex">
								<!-- Hamburger button -->
								<button
									class="text-slate-500 hover:text-slate-600 lg:hidden"
									@click.stop="sidebarOpen = !sidebarOpen"
									aria-controls="sidebar"
									:aria-expanded="sidebarOpen"
								>
									<span class="sr-only">Open sidebar</span>
									<svg
										class="w-6 h-6 fill-current"
										viewBox="0 0 24 24"
										xmlns="http://www.w3.org/2000/svg"
									>
										<rect x="4" y="5" width="16" height="2" />
										<rect x="4" y="11" width="16" height="2" />
										<rect x="4" y="17" width="16" height="2" />
									</svg>
								</button>
							</div>

			
						</div>
					</div>
				</header>

				<main>
					<div class="px-4 sm:px-6 lg:px-8 py-8 w-full max-w-9xl mx-auto">
						<!-- Page header -->
						<div class="mb-8">
							<h1 class="text-2xl md:text-3xl text-slate-800 font-bold">Home</h1>
						</div>

						<div class="border-t border-slate-200">
							<!-- Components -->
							<div class="space-y-8 mt-8">
								<!-- Input Types -->
								<div>
									<div class="grid gap-5 md:grid-cols-3">
										<!-- Start -->

										<div>
											<label class="block text-sm font-medium mb-1" for="default"
												>Select resource and table</label
											>

											<select id="res" class="form-select w-full">
												
											</select>
										</div>
										<!-- Trips -->
										<div>
											<label class="block text-sm font-medium mb-1" for="default"
												>Trips</label
											>

											<select id="templ" class="form-select w-full">
												<option value="unit_trips">Trips</option>
												<option value="unit_stays">Stays</option>
											</select>
										</div>
										<!-- Units -->
										<div>
											<label class="block text-sm font-medium mb-1" for="default"
												>Select unit</label
											>

											<select id="units" class="form-select w-full">
												
											</select>
										</div>
										<!-- Time interval -->
										<div>
											<label class="block text-sm font-medium mb-1" for="default"
												>Select time interval</label
											>

											<select id="interval" class="form-select w-full">
												<option
													value="86400"
													title="60 sec * 60 minutes * 24 hours = 86400 sec = 1 day"
												>
													Last day
												</option>
												<option
													value="604800"
													title="86400 sec * 7 days = 604800 sec = 1 week"
												>
													Last week
												</option>
												<option
													value="2592000"
													title="86400 sec * 30 days = 2592000 sec = 1 month"
												>
													Last month
												</option>
											</select>
										</div>

                                        <!-- report columns -->
                                        <div class="bg-white shadow-lg rounded-sm border border-slate-200 p-5 min-w-60 h-[300px] overflow-y-scroll">
											<label class="block text-sm font-medium mb-4" for="default"
												>Report Columns</label
											>
                                              <ul id="columns" class="space-y-2 w-full grid grid-cols-2 gap-2">
                                                
                                              </ul>
											
										</div>

										<div>
										
											<!-- End -->
										</div>

								
							</div>
						</div>

                        <div class="border-b mt-8 mb-8 border-slate-200">
                            <div class="flex flex-wrap justify-end items-center py-2 -m-1.5">
                                <div class="m-1.5">
                                        <!-- Start -->
                                        <button id="exec_btn" value="Execute report" class="btn bg-indigo-500 hover:bg-indigo-600 text-white">Execute report</button>
                                        <!-- End -->
                                    </div>
                                    <div class="m-1.5">
                                        <!-- Start -->
                                        <button class="btn border-slate-200 hover:border-slate-300 text-indigo-500">Template 1</button>
                                        <!-- End -->
                                    </div>
                                    <div class="m-1.5">
                                        <!-- Start -->
                                        <button class="btn bg-rose-500 hover:bg-rose-600 text-white">Reset</button>
                                        <!-- End -->
                                    </div>

                            </div>
                            
                        </div>
					</div>
				</main>
			</div>
		</div>

            <script type="text/javascript">
			function msg(text) {
				$("#log").prepend(text + "<br/>");
			}

			function init() {
				// Execute after login succeed
				// specify what kind of data should be returned
				var res_flags =
					wialon.item.Item.dataFlag.base | wialon.item.Resource.dataFlag.reports;
				var unit_flags = wialon.item.Item.dataFlag.base;

				var sess = wialon.core.Session.getInstance(); // get instance of current Session
				sess.loadLibrary("resourceReports"); // load Reports Library
				sess.updateDataFlags(
					// load items to current session
					[
						{
							// 'avl_resource's specification
							type: "type",
							data: "avl_resource",
							flags: res_flags,
							mode: 0,
						},
						{
							// 'avl_unit's specification
							type: "type",
							data: "avl_unit",
							flags: unit_flags,
							mode: 0,
						},
					],

					function (code) {
						// updateDataFlags callback
						if (code) {
							// exit if error code
							msg(wialon.core.Errors.getErrorText(code));
							return;
						}

						var res = sess.getItems("avl_resource"); // get loaded 'avl_resource's items
						if (!res || !res.length) {
							// check if resources found
							msg("Resources not found");
							return;
						}
						for (
							var i = 0;
							i < res.length;
							i++ // construct Select object using found resources
						)
							$("#res").append(
								"<option value='" +
									res[i].getId() +
									"'>" +
									res[i].getName() +
									"</option>"
							);

						var units = sess.getItems("avl_unit"); // get loaded 'avl_units's items
						// check if units found
						if (!units || !units.length) {
							msg("Units not found");
							return;
						}
						for (
							var i = 0;
							i < units.length;
							i++ // construct Select object using found units
						)
							$("#units").append(
								"<option value='" +
									units[i].getId() +
									"'>" +
									units[i].getName() +
									"</option>"
							);
					}
				);
				drawCheckboxes();
				$("#templ").change(drawCheckboxes);
			}

			function drawCheckboxes() {
				// get available reports table
				wialon.core.Session.getInstance().getReportTables(function (code, data) {
					var selectedTmpl = $("#templ").val();
					var col = [];
					var html = "";
					for (var i = 0; i < data.length; i++) {
						if (data[i].n == selectedTmpl) {
							//draw only selected report table
							col = data[i].col;
                            

							// Add checkboxes for "Driver Name" and "Driver Score"
							html +=
								`<li class="repo_col">
                                                <label for="driver_name" class="flex items-center">
                                                    <input id="driver_name" type="checkbox" class="form-checkbox" />
                                                    <span class="text-sm text-slate-600 font-medium ml-2">Driver name</span>
                                                </label>
                                            </li>`;
                                           
							html +=
                             `<li class="repo_col">
                                                <label for="driver_score" class="flex items-center">
                                                    <input id="driver_score" type="checkbox" class="form-checkbox" />
                                                    <span class="text-sm text-slate-600 font-medium ml-2">Driver score</span>
                                                </label>
                                            </li>`;

							for (var j = 0; j < col.length; j++) {
								// construct Select object using found report columns
								if (col[j].l !== "" && col[j].n !== "") {

    html +=

    `
    <li class="repo_col">
                                                <label for="${col[j].n}" class="flex items-center">
                                                    <input id="${col[j].n}" type="checkbox" class="form-checkbox" />
                                                    <span class="text-sm text-slate-600 font-medium ml-2">${col[j].l}</span>
                                                </label>
                                            </li>`;
    

										
}

							}
						}
					}
					$("#columns").html(html);
				});
			}

			function executeReport() {
				// execute selected report
				// get data from corresponding fields
				var id_res = $("#res").val(),
					templ = $("#templ").val(),
					id_unit = $("#units").val(),
					time = $("#interval").val();
				if (!id_res) {
					msg("Select resource");
					return;
				} // exit if no resource selected
				if (!id_unit) {
					msg("Select unit");
					return;
				} // exit if no unit selected
				var sess = wialon.core.Session.getInstance(); // get instance of current Session
				var res = sess.getItem(id_res); // get resource by id
				var to = sess.getServerTime(); // get current server time (end time of report time interval)
				var from = to - parseInt($("#interval").val(), 10); // calculate start time of report
				var columns = $("ul li .rep_col:checked"); // get columns, that need to be in a report
				// specify time interval object
				var interval = {
					from: from,
					to: to,
					flags: wialon.item.MReport.intervalFlag.absolute,
				};

				var c = "",
					cl = ""; // columns and columnsLabels variables
				for (var i = 0; i < columns.length; i++) {
					// cycle to generate columns and columnsLabels
					c += (c == "" ? "" : ",") + columns[i].id;
					cl += (cl == "" ? "" : ",") + $(columns[i].nextSibling).text(); //.innerText;
				}
				$("#exec_btn").prop("disabled", true); // disable button (to prevent multiclick while execute)
				var template = {
					// fill template object
					id: 0,
					n: templ,
					ct: "avl_unit",
					p: "",
					tbl: [
						{
							n: templ,
							l: $("#templ option[value='" + templ + "']").text(),
							c: c,
							cl: cl,
							s: "",
							sl: "",
							p: "",
							sch: {
								f1: 0,
								f2: 0,
								t1: 0,
								t2: 0,
								m: 0,
								y: 0,
								w: 0,
							},
							f: 0,
						},
					],
				};
				// for (var i = 0; i < units.length; i++) {
				//console.log(units$('#units').val());
				//}

				res.execReport(
					template,
					id_unit,
					0,
					interval, // execute selected report

					function (code, data) {
                        console.log(data);
						// execReport template
						$("#exec_btn").prop("disabled", false); // enable button
						if (code) {
							msg(wialon.core.Errors.getErrorText(code));
							return;
						} // exit if error code
						if (!data.getTables().length) {
							// exit if no tables obtained
							msg("<b>There is no data generated</b>");
							return;
						} else showReportResult(data); // show report result
					}
				);
			}

			function showReportResult(result) {
				// show result after report execute
				var tables = result.getTables(); // get report tables
				if (!tables) return; // exit if no tables
				const date = new Date();
				const months = [
					"Jan",
					"Feb",
					"Mar",
					"Apr",
					"May",
					"Jun",
					"Jul",
					"Aug",
					"Sep",
					"Oct",
					"Nov",
					"Dec",
				];
				let month = months[date.getMonth()];
				for (var i = 0; i < tables.length; i++) {
					// cycle on tables
					// html contains information about one table
				var html = `
  <div class="row">
    <div class="col-12 col-sm-12">
        <div class="card">

      <div class="card-header d-lg-flex">
        <h3 class="card-title mb-lg-0 mb-3">Drivers Performance Report</h3>
        <div class="tabs-menu1 ms-auto border-0 p-0">
          <!-- Tabs -->
          <ul class="nav panel-tabs product-sale">
            <li><a href="#" data-bs-toggle="tab">
              Date/Time: ${date.getDate()} - ${month} ${date.getFullYear()} ${date.getHours()}: ${date.getMinutes()}: ${date.getSeconds()}
            </a></li>
            <li><a href="#" data-bs-toggle="tab">
              GMT Time Zone: ${date}
            </a></li>
            <li><a href="#" data-bs-toggle="tab">
              ${tables[i].label}
            </a></li>
          </ul>
        </div>
      </div>

    // 
      <div class="card-body product-table">
        
        <div class="tab-content">
          <div class="tab-pane border-0 p-0 active" id="tab5">
            <div class="table-responsive">
              <table class="table table-bordered text-nowrap mb-0">
`;

var headers = tables[i].header; // get table headers
console.log(headers);

html += `
              <thead class="border-top">
                <tr>
`;

for (var j = 0; j < headers.length; j++) {
console.log(headers[j]);
  // add header
  html += `<th>${headers[j]}</th>`;
}

html += `
                </tr>
              </thead>
`; // close header row

result.getTableRows(
  i,
  0,
  tables[i].rows, // get Table rows
  function (code, rows) {
    // getTableRows callback
    if (code) {
      msg(wialon.core.Errors.getErrorText(code));
      return;
    } // exit if error code

    for (var j in rows) {
      // cycle on table rows
      if (typeof rows[j].c == "undefined") continue; // skip empty rows

      html += `<tbody><tr>`;

      for (var k = 0; k < rows[j].c.length; k++) {
        // add ceils to table
        html += `
            <td>
              <h6 class="mb-0 fs-14 fw-semibold">
                ${getTableValue(rows[j].c[k])}
              </h6>
            </td>
        `;
      }

      html += `
          </tr>
        </tbody>
      `; // close table row
    }

    html += `
              </table>`;
msg(html + ` </div>
          </div>
        </div>
      </div>
  </div>
  </div>
  </div>`);
},
this,
html
);

				}
			}

			function getTableValue(data) {
				// calculate ceil value
				if (typeof data == "object")
					if (typeof data.t == "string") return data.t;
					else return "";
				else return data;
			}

			// execute when DOM ready
			$(document).ready(function () {
				$("#exec_btn").click(executeReport); // bind action to button click

				wialon.core.Session.getInstance().initSession("https://hst-api.wialon.com"); // init session
				// For more info about how to generate token check
				// http://sdk.wialon.com/playground/demo/app_auth_token
				wialon.core.Session.getInstance().loginToken(
					"cff41ecd2f9615c24a95c8e9d906cde919EC3CF6C255BC15A58EFADDB09331959D754E6D",
					"", // try to login
					function (code) {
						// login callback
						// if error code - print error message
						if (code) {
							msg(wialon.core.Errors.getErrorText(code));
							return;
						}
						msg("Logged successfully");
						init(); // when login suceed then run init() function
					}
				);
			});
		</script>

		<script src="./js/vendors/alpinejs.min.js" defer></script>
	</body>
</html>
